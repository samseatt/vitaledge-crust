### **VitalEdge Crust API Collection Document**

---

#### **Introduction**
The **VitalEdge Crust** microservice serves as the centralized facade for the VitalEdge system, acting as a unifying API gateway for all end-user-facing interactions. It abstracts the complexity of individual microservices while enforcing security, logging, and other aspect-oriented concerns.

This document outlines the APIs provided by VitalEdge Crust, their functions, and how they map to other microservices in the system.

---

### **API Categories**
VitalEdge Crust organizes its APIs into the following categories:

1. **Clinical Core API**
2. **Analytics API**
3. **House API**
4. **Twin (Patient) API**
5. **Case API**
6. **Dashboards API**
7. **Pipes API**
8. **Management and Security API**
9. **Admin API**

---

### **API Definitions**

#### 1. **Clinical Core API**
- **Purpose**: Provides access to static clinical data (e.g., patient records, history, demographics).
- **Endpoints**:
  - **`GET /core/patient/{patient_id}`**
    - Fetch detailed patient information.
  - **`POST /core/patient/{patient_id}/update`**
    - Update static patient information.
  - **`GET /core/labs/{patient_id}`**
    - Retrieve lab results for a patient.
- **Mapped Microservice**: **VitalEdge Clinical Core** (Spring Boot).

#### 2. **Analytics API**
- **Purpose**: Facilitates access to insights generated by LangChain, ML-* pipelines, and traditional analytics tools.
- **Endpoints**:
  - **`POST /analytics/query`**
    - Perform a query via LangChain.
  - **`GET /analytics/ml-inference/{model_id}`**
    - Fetch results from ML inference pipelines.
  - **`GET /analytics/report/{report_id}`**
    - Retrieve a traditional analytics report.
- **Mapped Microservice**: **VitalEdge Analytics** (FastAPI).

#### 3. **House API**
- **Purpose**: Interact with the in-house AI doctor for medical insights and collaboration.
- **Endpoints**:
  - **`POST /house/query`**
    - Query the AI doctor with a specific question or scenario.
  - **`GET /house/status`**
    - Check the AI doctor's operational status.
- **Mapped Microservice**: **VitalEdge House** (FastAPI or Node.js).

#### 4. **Twin (Patient) API**
- **Purpose**: Access and manage the digital twin representing a patient.
- **Endpoints**:
  - **`GET /twin/{patient_id}`**
    - Fetch the digital twin data for a patient.
  - **`POST /twin/{patient_id}/update`**
    - Update data in the digital twin.
- **Mapped Microservice**: **VitalEdge Twin** (FastAPI).

#### 5. **Case API**
- **Purpose**: Manage patient-specific cases and track their progression.
- **Endpoints**:
  - **`GET /case/{case_id}`**
    - Fetch detailed information about a specific case.
  - **`POST /case/{case_id}/event`**
    - Add an event to a case timeline.
  - **`GET /case/{case_id}/timeline`**
    - Retrieve the timeline of events in a case.
- **Mapped Microservice**: **VitalEdge Case** (FastAPI).

#### 6. **Dashboards API**
- **Purpose**: Provide real-time and historical data for visualization.
- **Endpoints**:
  - **`GET /dashboards/realtime/{patient_id}`**
    - Fetch real-time metrics for a patient.
  - **`GET /dashboards/historical/{patient_id}`**
    - Retrieve historical data for visualization.
- **Mapped Microservice**: **VitalEdge Data Aggregator** (Node.js).

#### 7. **Pipes API**
- **Purpose**: Monitor and control bioinformatics pipelines, data ingestion, and ML training.
- **Endpoints**:
  - **`POST /pipes/start/{pipeline_id}`**
    - Initiate a pipeline execution.
  - **`GET /pipes/status/{pipeline_id}`**
    - Check the status of a pipeline.
- **Mapped Microservice**: **VitalEdge Pipelines** (FastAPI or R Plumber).

#### 8. **Management and Security API**
- **Purpose**: Handle user authentication, encryption, and event logging.
- **Endpoints**:
  - **`POST /security/login`**
    - Authenticate a user and issue a JWT token.
  - **`GET /security/validate-token`**
    - Validate a user’s JWT token.
  - **`POST /logging/log-event`**
    - Log an event in the system.
- **Mapped Microservices**:
  - **VitalEdge Security** (Kotlin).
  - **VitalEdge Logging** (Kotlin).
  - **VitalEdge Blockchain** (Go).

#### 9. **Admin API**
- **Purpose**: Provide privileged access to administrative functions.
- **Endpoints**:
  - **`GET /admin/logs`**
    - Retrieve system logs.
  - **`GET /admin/blockchain/audit`**
    - Check the blockchain audit trail.
  - **`POST /admin/trigger/{operation_id}`**
    - Trigger an administrative operation.
- **Mapped Microservices**:
  - **VitalEdge Logging** (Kotlin).
  - **VitalEdge Blockchain** (Go).

---

### **Cross-Cutting Concerns**
All APIs within Crust include aspect-oriented functionality for:

1. **Security**:
   - Integration with **VitalEdge Security** for token validation and encryption via **VitalEdge Crypt**.
2. **Logging**:
   - Event logging using **VitalEdge Logging**, with critical events forwarded to **VitalEdge Blockchain**.
3. **STT/TTS**:
   - Optional endpoints to handle voice input/output for hands-free interactions (e.g., `/stt` and `/tts`).

---

### **API Formats**
Crust supports the following interaction types:
1. **Pull-Based (REST)**:
   - Standard RESTful endpoints with JSON payloads.
2. **Push-Based (WebSocket)**:
   - Real-time data streams for dashboards and alerts.
3. **Voice Integration (TTS/STT)**:
   - Voice-querying endpoints for immersive interactions, particularly for XR use cases.

---

### **Conclusion**
VitalEdge Crust’s unified API provides a seamless interface for all front-end and XR applications to access the full capabilities of the VitalEdge ecosystem. Its robust middleware ensures that cross-cutting concerns like security, logging, and voice capabilities are handled transparently.
